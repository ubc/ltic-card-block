(()=>{"use strict";var e,t={721(){const e=window.wp.blocks,t=window.wp.i18n,o=window.wp.element,r=window.wp.data,n=window.wp.blockEditor,i=window.wp.components,a=window.wp.primitives,c=window.ReactJSXRuntime;var l=(0,c.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(a.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})});const s=[{name:"card-1",title:(0,t.__)("A card block that includes an image, a text content section and a button"),description:(0,t.__)("A card block that includes an image, a text content section and a button"),icon:(0,c.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",style:{width:"200px",height:"200px"},children:[(0,c.jsx)(i.Rect,{x:"36",y:"20",width:"128",height:"160",rx:"8",stroke:"currentColor",fill:"none",strokeWidth:"6"}),(0,c.jsx)(i.Rect,{x:"52",y:"36",width:"96",height:"80",fill:"currentColor",opacity:"0.2"}),(0,c.jsx)(i.Rect,{x:"52",y:"128",width:"80",height:"12",fill:"currentColor"}),(0,c.jsx)(i.Rect,{x:"52",y:"148",width:"96",height:"8",fill:"currentColor",opacity:"0.5"}),(0,c.jsx)(i.Rect,{x:"52",y:"160",width:"48",height:"12",fill:"currentColor"})]}),innerBlocks:[["core/image"],["ltic/card-inner-text-block",{templateLock:"false"},[["core/heading",{content:"Card Title"}],["core/paragraph",{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]]],["core/buttons",{},[["core/button",{text:"Read More"}]]]],isDefault:!0,scope:["block","transform"],attributes:{variationType:"card-1"},isActive:(e,t)=>e.variationType===t.variationType},{name:"card-2",title:(0,t.__)("A card block that includes an image and a text content section"),description:(0,t.__)("A card block that includes an image and a text content section"),icon:(0,c.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",style:{width:"200px",height:"200px"},children:[(0,c.jsx)(i.Rect,{x:"36",y:"20",width:"128",height:"160",rx:"8",stroke:"currentColor",fill:"none",strokeWidth:"6"}),(0,c.jsx)(i.Rect,{x:"52",y:"36",width:"96",height:"80",fill:"currentColor",opacity:"0.2"}),(0,c.jsx)(i.Rect,{x:"52",y:"128",width:"80",height:"12",fill:"currentColor"}),(0,c.jsx)(i.Rect,{x:"52",y:"148",width:"96",height:"8",fill:"currentColor",opacity:"0.5"})]}),isDefault:!1,innerBlocks:[["core/image"],["ltic/card-inner-text-block",{templateLock:"false"},[["core/heading",{content:"Card Title"}],["core/paragraph",{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]]]],scope:["block","transform"],attributes:{variationType:"card-2"},isActive:(e,t)=>e.variationType===t.variationType},{name:"card-3",title:(0,t.__)("A card block that includes a text content section and a button"),description:(0,t.__)("A card block that includes a text content section and a button"),icon:(0,c.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",style:{width:"200px",height:"200px"},children:[(0,c.jsx)(i.Rect,{x:"36",y:"20",width:"128",height:"160",rx:"8",stroke:"currentColor",fill:"none",strokeWidth:"6"}),(0,c.jsx)(i.Rect,{x:"52",y:"128",width:"80",height:"12",fill:"currentColor"}),(0,c.jsx)(i.Rect,{x:"52",y:"148",width:"96",height:"8",fill:"currentColor",opacity:"0.5"}),(0,c.jsx)(i.Rect,{x:"52",y:"160",width:"48",height:"12",fill:"currentColor"})]}),isDefault:!1,innerBlocks:[["ltic/card-inner-text-block",{templateLock:"false"},[["core/heading",{content:"Card Title"}],["core/paragraph",{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]]],["core/buttons",{},[["core/button",{text:"Read More"}]]]],scope:["block","transform"],attributes:{variationType:"card-3"},isActive:(e,t)=>e.variationType===t.variationType},{name:"card-4",title:(0,t.__)("A card block that includes a text content section only"),description:(0,t.__)("A card block that includes a text content section only"),icon:(0,c.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",style:{width:"200px",height:"200px"},children:[(0,c.jsx)(i.Rect,{x:"36",y:"20",width:"128",height:"160",rx:"8",stroke:"currentColor",fill:"none",strokeWidth:"6"}),(0,c.jsx)(i.Rect,{x:"52",y:"128",width:"80",height:"12",fill:"currentColor"})]}),isDefault:!1,innerBlocks:[["ltic/card-inner-text-block",{templateLock:"false"},[["core/heading",{content:"Card Title"}],["core/paragraph",{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]]]],scope:["block","transform"],attributes:{variationType:"card-4"},isActive:(e,t)=>e.variationType===t.variationType}],d={"core/image":"core/post-featured-image","core/heading":"core/post-title","core/paragraph":"core/post-excerpt","core/button":"core/read-more"},u={"card-1":"card-2","card-3":"card-4"};function p({clientId:o,name:i,setAttributes:a}){const{blockType:l,defaultVariation:s,variations:d}=(0,r.useSelect)(t=>{const{getBlockVariations:o,getBlockType:r,getDefaultBlockVariation:n}=t(e.store);return{blockType:r(i),defaultVariation:n(i,"block"),variations:o(i,"block")}},[i]),{replaceInnerBlocks:u}=(0,r.useDispatch)(n.store),p=(0,n.useBlockProps)();return(0,c.jsx)("div",{...p,children:(0,c.jsx)(n.__experimentalBlockVariationPicker,{icon:l?.icon?.src,label:l?.title,variations:d,instructions:(0,t.__)("Select a card layout to start:"),onSelect:(t=s)=>{t.attributes&&a(t.attributes),t.innerBlocks&&u(o,(0,e.createBlocksFromInnerBlocksTemplate)(t.innerBlocks),!1)},allowSkip:!0})})}const h=(t,o)=>t.map(t=>{const r=o.findIndex(e=>e.name===t.name||d[t.name]===e.name);if(-1!==r){const[n]=o.splice(r,1),i={...t.attributes,...n.attributes};return(0,e.createBlock)(n.name,i,n.innerBlocks)}if(t.innerBlocks.length>0){const r=h(t.innerBlocks,o);return(0,e.createBlock)(t.name,t.attributes,r)}return t});function x({attributes:a,setAttributes:d,clientId:p}){const{variationType:x,url:k,linkTarget:m,rel:g}=a,{replaceInnerBlocks:w}=(0,r.useDispatch)(n.store),v=(0,r.useSelect)(e=>e(n.store).getBlocks(p),[p]),[b,f]=(0,o.useState)(!1),y=()=>f(!1),B=(0,o.useRef)();(0,o.useEffect)(()=>{const o=s.find(e=>e.attributes.variationType===x);if(o?.innerBlocks){const r=o.innerBlocks,n=(0,e.createBlocksFromInnerBlocksTemplate)(r),i=v.map(e=>({...e})),a=h(n,i),c=a.find(e=>"core/image"===e.name);!c||c.attributes.url||c.attributes.id||void 0!==window.lticCardBlockData&&window.lticCardBlockData.defaultImageUrl&&(c.attributes.url=window.lticCardBlockData.defaultImageUrl,c.attributes.alt=(0,t.__)("Default Image","wp-card-block")),v.map(e=>e.name+("core/image"===e.name?e.attributes.url:"")).join("|")!==a.map(e=>e.name+("core/image"===e.name?e.attributes.url:"")).join("|")&&w(p,a,!1)}},[x,p,v,w]);const j=(0,n.useBlockProps)({className:""}),_=(0,n.useInnerBlocksProps)(j,{directInsert:!0,orientation:"horizontal",renderAppender:!1,templateLock:"all"}),C=(0,o.useRef)(x);(0,o.useEffect)(()=>{C.current=x},[x]);const T=C.current,[R,I]=(0,o.useState)(!1),[A,L]=(0,o.useState)(null),[S,D]=(0,o.useState)(!1),[P,V]=(0,o.useState)(null);(0,o.useEffect)(()=>{x!==T&&u[x]&&k&&(L(T),I(!0))},[x,k,T]);const O=()=>{A&&d({variationType:A}),I(!1),L(null)},q=()=>{D(!1),V(null)},E=b&&(0,c.jsx)(i.Popover,{position:"bottom center",onClose:y,anchorRef:B.current,children:(0,c.jsx)(n.__experimentalLinkControl,{value:{url:k,opensInNewTab:"_blank"===m},onChange:e=>{const t=e.url,o=e.opensInNewTab;let r=g;r=o?r?r+" noopener noreferrer":"noopener noreferrer":r?r.replace(/noopener|noreferrer/g,"").trim():"";const n={url:t,linkTarget:o?"_blank":"",rel:r};if(t&&u[x]){const e=u[x];return n.variationType=e,V(n),void D(!0)}d(n)},onRemove:()=>{d({url:void 0,linkTarget:void 0,rel:void 0}),y()}})});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{..._}),(0,c.jsx)(n.BlockControls,{children:(0,c.jsx)(i.ToolbarButton,{icon:l,label:"Link",onClick:()=>f(!0),isActive:b||!!k,ref:B})}),E,R&&(0,c.jsxs)(i.Modal,{title:(0,t.__)("Remove Link?","wp-card-block"),onRequestClose:O,children:[(0,c.jsx)("p",{children:(0,t.__)('The "Whole Card as Link" feature does not support variations that include buttons, as this causes invalid HTML. By confirming, the existing link will be removed from the card. Do you want to proceed?',"wp-card-block")}),(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[(0,c.jsx)(i.Button,{variant:"secondary",onClick:O,children:(0,t.__)("Cancel","wp-card-block")}),(0,c.jsx)(i.Button,{variant:"primary",onClick:()=>{d({url:void 0,linkTarget:void 0,rel:void 0}),I(!1),L(null)},children:(0,t.__)("Proceed","wp-card-block")})]})]}),S&&(0,c.jsxs)(i.Modal,{title:(0,t.__)("Layout Change Required","wp-card-block"),onRequestClose:q,children:[(0,c.jsx)("p",{children:(0,t.__)("Adding a link to this card requires changing the layout to remove the button, as buttons cannot be inside links. The layout will switch to a version without buttons. Do you want to proceed?","wp-card-block")}),(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[(0,c.jsx)(i.Button,{variant:"secondary",onClick:q,children:(0,t.__)("Cancel","wp-card-block")}),(0,c.jsx)(i.Button,{variant:"primary",onClick:()=>{P&&d(P),D(!1),V(null)},children:(0,t.__)("Proceed","wp-card-block")})]})]})]})}const k=JSON.parse('{"UU":"ltic/card-block"}');var m=(0,c.jsxs)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,c.jsx)(a.Path,{d:"m7 6.5 4 2.5-4 2.5z"}),(0,c.jsx)(a.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"m5 3c-1.10457 0-2 .89543-2 2v14c0 1.1046.89543 2 2 2h14c1.1046 0 2-.8954 2-2v-14c0-1.10457-.8954-2-2-2zm14 1.5h-14c-.27614 0-.5.22386-.5.5v10.7072l3.62953-2.6465c.25108-.1831.58905-.1924.84981-.0234l2.92666 1.8969 3.5712-3.4719c.2911-.2831.7545-.2831 1.0456 0l2.9772 2.8945v-9.3568c0-.27614-.2239-.5-.5-.5zm-14.5 14.5v-1.4364l4.09643-2.987 2.99567 1.9417c.2936.1903.6798.1523.9307-.0917l3.4772-3.3806 3.4772 3.3806.0228-.0234v2.5968c0 .2761-.2239.5-.5.5h-14c-.27614 0-.5-.2239-.5-.5z"})]});(0,e.registerBlockType)(k.UU,{icon:m,variations:s,edit:function(t){const{clientId:i,attributes:a,setAttributes:l,context:s}=t,{isInQueryLoop:u}=a,h=(0,r.useSelect)(e=>e(n.store).getBlocks(i),[i]),{replaceInnerBlocks:k}=(0,r.useDispatch)(n.store),m=Number.isFinite(s.queryId);(0,o.useEffect)(()=>{m&&!u?l({isInQueryLoop:!0}):!m&&u&&l({isInQueryLoop:!1})},[m,u,l]),(0,o.useEffect)(()=>{if(u&&h.length>0){let t=!1,o=!1,r=!1;const n=i=>i.map(i=>{const a=d[i.name];if(a)if("core/heading"===i.name){if(!t)return t=!0,r=!0,(0,e.createBlock)(a,{level:i.attributes.level,isLink:!0})}else{if("core/paragraph"!==i.name)return r=!0,(0,e.createBlock)(a,{...i.attributes});if(!o)return o=!0,r=!0,(0,e.createBlock)(a)}if(i.innerBlocks.length>0){const t=n(i.innerBlocks);return(0,e.createBlock)(i.name,i.attributes,t)}return i}),a=n(h);r&&(console.log("Auto-transforming blocks for Query Loop context..."),k(i,a,!1))}},[u,h,i,k]);const g=h.length>0?x:p;return(0,c.jsx)(g,{...t})},save:function({attributes:e}){const{url:t,linkTarget:o,rel:r,variationType:i}=e,a=n.useBlockProps.save(),l=u.hasOwnProperty(i);return t&&!l?(0,c.jsx)("a",{href:t,target:o,rel:r,...a,children:(0,c.jsx)(n.InnerBlocks.Content,{})}):(0,c.jsx)("div",{...a,children:(0,c.jsx)(n.InnerBlocks.Content,{})})}})}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,o,n,i)=>{if(!o){var a=1/0;for(d=0;d<e.length;d++){for(var[o,n,i]=e[d],c=!0,l=0;l<o.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every(e=>r.O[e](o[l]))?o.splice(l--,1):(c=!1,i<a&&(a=i));if(c){e.splice(d--,1);var s=n();void 0!==s&&(t=s)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,n,i]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={184:0,816:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,i,[a,c,l]=o,s=0;if(a.some(t=>0!==e[t])){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(l)var d=l(r)}for(t&&t(o);s<a.length;s++)i=a[s],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},o=globalThis.webpackChunkwp_card_block=globalThis.webpackChunkwp_card_block||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=r.O(void 0,[816],()=>r(721));n=r.O(n)})();