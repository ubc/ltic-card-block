(()=>{"use strict";var e,t={721(){const e=window.wp.blocks,t=window.wp.i18n,r=window.wp.element,o=window.wp.data,n=window.wp.blockEditor,i=window.wp.components,a=window.wp.primitives,c=window.ReactJSXRuntime;var l=(0,c.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(a.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})});const s=[{name:"card-1",title:(0,t.__)("A card block that includes an image, a text content section and a button"),description:(0,t.__)("A card block that includes an image, a text content section and a button"),icon:(0,c.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",style:{width:"200px",height:"200px"},children:[(0,c.jsx)(i.Rect,{x:"36",y:"20",width:"128",height:"160",rx:"8",stroke:"currentColor",fill:"none",strokeWidth:"6"}),(0,c.jsx)(i.Rect,{x:"52",y:"36",width:"96",height:"80",fill:"currentColor",opacity:"0.2"}),(0,c.jsx)(i.Rect,{x:"52",y:"128",width:"80",height:"12",fill:"currentColor"}),(0,c.jsx)(i.Rect,{x:"52",y:"148",width:"96",height:"8",fill:"currentColor",opacity:"0.5"}),(0,c.jsx)(i.Rect,{x:"52",y:"160",width:"48",height:"12",fill:"currentColor"})]}),innerBlocks:[["core/image"],["ltic/card-inner-text-block",{templateLock:"false"},[["core/heading",{content:"Card Title"}],["core/paragraph",{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]]],["core/buttons",{},[["core/button",{text:"Read More"}]]]],isDefault:!0,scope:["block","transform"],attributes:{variationType:"card-1"},isActive:(e,t)=>e.variationType===t.variationType},{name:"card-2",title:(0,t.__)("A card block that includes an image and a text content section"),description:(0,t.__)("A card block that includes an image and a text content section"),icon:(0,c.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",style:{width:"200px",height:"200px"},children:[(0,c.jsx)(i.Rect,{x:"36",y:"20",width:"128",height:"160",rx:"8",stroke:"currentColor",fill:"none",strokeWidth:"6"}),(0,c.jsx)(i.Rect,{x:"52",y:"36",width:"96",height:"80",fill:"currentColor",opacity:"0.2"}),(0,c.jsx)(i.Rect,{x:"52",y:"128",width:"80",height:"12",fill:"currentColor"}),(0,c.jsx)(i.Rect,{x:"52",y:"148",width:"96",height:"8",fill:"currentColor",opacity:"0.5"})]}),isDefault:!1,innerBlocks:[["core/image"],["ltic/card-inner-text-block",{templateLock:"false"},[["core/heading",{content:"Card Title"}],["core/paragraph",{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]]]],scope:["block","transform"],attributes:{variationType:"card-2"},isActive:(e,t)=>e.variationType===t.variationType},{name:"card-3",title:(0,t.__)("A card block that includes a text content section and a button"),description:(0,t.__)("A card block that includes a text content section and a button"),icon:(0,c.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",style:{width:"200px",height:"200px"},children:[(0,c.jsx)(i.Rect,{x:"36",y:"20",width:"128",height:"160",rx:"8",stroke:"currentColor",fill:"none",strokeWidth:"6"}),(0,c.jsx)(i.Rect,{x:"52",y:"128",width:"80",height:"12",fill:"currentColor"}),(0,c.jsx)(i.Rect,{x:"52",y:"148",width:"96",height:"8",fill:"currentColor",opacity:"0.5"}),(0,c.jsx)(i.Rect,{x:"52",y:"160",width:"48",height:"12",fill:"currentColor"})]}),isDefault:!1,innerBlocks:[["ltic/card-inner-text-block",{templateLock:"false"},[["core/heading",{content:"Card Title"}],["core/paragraph",{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]]],["core/buttons",{},[["core/button",{text:"Read More"}]]]],scope:["block","transform"],attributes:{variationType:"card-3"},isActive:(e,t)=>e.variationType===t.variationType},{name:"card-4",title:(0,t.__)("A card block that includes a text content section only"),description:(0,t.__)("A card block that includes a text content section only"),icon:(0,c.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",style:{width:"200px",height:"200px"},children:[(0,c.jsx)(i.Rect,{x:"36",y:"20",width:"128",height:"160",rx:"8",stroke:"currentColor",fill:"none",strokeWidth:"6"}),(0,c.jsx)(i.Rect,{x:"52",y:"128",width:"80",height:"12",fill:"currentColor"})]}),isDefault:!1,innerBlocks:[["ltic/card-inner-text-block",{templateLock:"false"},[["core/heading",{content:"Card Title"}],["core/paragraph",{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]]]],scope:["block","transform"],attributes:{variationType:"card-4"},isActive:(e,t)=>e.variationType===t.variationType}],d={"core/image":"core/post-featured-image","core/heading":"core/post-title","core/paragraph":"core/post-excerpt","core/button":"core/read-more"},u={"card-1":"card-2","card-3":"card-4"};function p({clientId:r,name:i,setAttributes:a}){const{blockType:l,defaultVariation:s,variations:d}=(0,o.useSelect)(t=>{const{getBlockVariations:r,getBlockType:o,getDefaultBlockVariation:n}=t(e.store);return{blockType:o(i),defaultVariation:n(i,"block"),variations:r(i,"block")}},[i]),{replaceInnerBlocks:u}=(0,o.useDispatch)(n.store),p=(0,n.useBlockProps)();return(0,c.jsx)("div",{...p,children:(0,c.jsx)(n.__experimentalBlockVariationPicker,{icon:l?.icon?.src,label:l?.title,variations:d,instructions:(0,t.__)("Select a card layout to start:"),onSelect:(t=s)=>{t.attributes&&a(t.attributes),t.innerBlocks&&u(r,(0,e.createBlocksFromInnerBlocksTemplate)(t.innerBlocks),!1)},allowSkip:!0})})}const h=(t,r)=>t.map(t=>{const o=r.findIndex(e=>e.name===t.name||d[t.name]===e.name);if(-1!==o){const[n]=r.splice(o,1),i={...t.attributes,...n.attributes};return(0,e.createBlock)(n.name,i,n.innerBlocks)}if(t.innerBlocks.length>0){const o=h(t.innerBlocks,r);return(0,e.createBlock)(t.name,t.attributes,o)}return t});function k({attributes:a,setAttributes:d,clientId:p}){const{variationType:k,url:x,linkTarget:m,rel:g,linkEnabled:b,isInQueryLoop:w}=a,{replaceInnerBlocks:v}=(0,o.useDispatch)(n.store),f=(0,o.useSelect)(e=>e(n.store).getBlocks(p),[p]),[y,B]=(0,r.useState)(!1),j=()=>B(!1),C=(0,r.useRef)();(0,r.useEffect)(()=>{const r=s.find(e=>e.attributes.variationType===k);if(r?.innerBlocks){const o=r.innerBlocks,n=(0,e.createBlocksFromInnerBlocksTemplate)(o),i=f.map(e=>({...e})),a=h(n,i),c=a.find(e=>"core/image"===e.name);!c||c.attributes.url||c.attributes.id||void 0!==window.lticCardBlockData&&window.lticCardBlockData.defaultImageUrl&&(c.attributes.url=window.lticCardBlockData.defaultImageUrl,c.attributes.alt=(0,t.__)("Default Image","wp-card-block")),f.map(e=>e.name+("core/image"===e.name?e.attributes.url:"")).join("|")!==a.map(e=>e.name+("core/image"===e.name?e.attributes.url:"")).join("|")&&v(p,a,!1)}},[k,p,f,v]);const _=(0,n.useBlockProps)({className:""}),T=(0,n.useInnerBlocksProps)(_,{directInsert:!0,orientation:"horizontal",renderAppender:!1,templateLock:"all"}),L=(0,r.useRef)(k);(0,r.useEffect)(()=>{L.current=k},[k]);const R=L.current,[I,A]=(0,r.useState)(!1),[S,D]=(0,r.useState)(null),[E,P]=(0,r.useState)(!1),[V,O]=(0,r.useState)(null);(0,r.useEffect)(()=>{k!==R&&u[k]&&x&&(D(R),A(!0))},[k,x,R]);const q=()=>{S&&d({variationType:S}),A(!1),D(null)},H=()=>{P(!1),O(null)},M=y&&(0,c.jsxs)(i.Popover,{position:"bottom center",onClose:j,anchorRef:C.current,children:[!w&&(0,c.jsx)(n.__experimentalLinkControl,{value:{url:x,opensInNewTab:"_blank"===m},onChange:e=>{const t=e.url,r=e.opensInNewTab;let o=g;o=r?o?o+" noopener noreferrer":"noopener noreferrer":o?o.replace(/noopener|noreferrer/g,"").trim():"";const n={url:t,linkTarget:r?"_blank":"",rel:o,linkEnabled:!0};if(t&&u[k]){const e=u[k];return n.variationType=e,O(n),void P(!0)}d(n)},onRemove:()=>{d({url:void 0,linkTarget:void 0,rel:void 0,linkEnabled:!1}),j()}}),w&&(0,c.jsx)("div",{style:{padding:"16px 30px",marginTop:"12px"},children:(0,c.jsx)(i.ToggleControl,{label:"Link",checked:b,onChange:e=>{d({linkEnabled:e,url:e?"#":void 0,linkTarget:e?"":void 0,rel:e?"":void 0})}})})]});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{...T}),(0,c.jsx)(n.BlockControls,{children:(0,c.jsx)(i.ToolbarButton,{icon:l,label:"Link",onClick:()=>B(!0),isActive:b,ref:C})}),M,I&&(0,c.jsxs)(i.Modal,{title:(0,t.__)("Remove Link?","wp-card-block"),onRequestClose:q,children:[(0,c.jsx)("p",{children:(0,t.__)('The "Whole Card as Link" feature does not support variations that include buttons, as this causes HTML violation. By confirming, the existing link on the card will be removed. Do you want to proceed?',"wp-card-block")}),(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[(0,c.jsx)(i.Button,{variant:"secondary",onClick:q,children:(0,t.__)("Cancel","wp-card-block")}),(0,c.jsx)(i.Button,{variant:"primary",onClick:()=>{d({url:void 0,linkTarget:void 0,rel:void 0}),A(!1),D(null)},children:(0,t.__)("Proceed","wp-card-block")})]})]}),E&&(0,c.jsxs)(i.Modal,{title:(0,t.__)("Layout Change Required","wp-card-block"),onRequestClose:H,children:[(0,c.jsx)("p",{children:(0,t.__)('Enabling the "Whole Card as Link" feature requires switch to a variation that does not include buttons, as this will cause HTML violation. Do you want to proceed?',"wp-card-block")}),(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[(0,c.jsx)(i.Button,{variant:"secondary",onClick:H,children:(0,t.__)("Cancel","wp-card-block")}),(0,c.jsx)(i.Button,{variant:"primary",onClick:()=>{V&&d(V),P(!1),O(null)},children:(0,t.__)("Proceed","wp-card-block")})]})]})]})}const x=JSON.parse('{"UU":"ltic/card-block"}');var m=(0,c.jsxs)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,c.jsx)(a.Path,{d:"m7 6.5 4 2.5-4 2.5z"}),(0,c.jsx)(a.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"m5 3c-1.10457 0-2 .89543-2 2v14c0 1.1046.89543 2 2 2h14c1.1046 0 2-.8954 2-2v-14c0-1.10457-.8954-2-2-2zm14 1.5h-14c-.27614 0-.5.22386-.5.5v10.7072l3.62953-2.6465c.25108-.1831.58905-.1924.84981-.0234l2.92666 1.8969 3.5712-3.4719c.2911-.2831.7545-.2831 1.0456 0l2.9772 2.8945v-9.3568c0-.27614-.2239-.5-.5-.5zm-14.5 14.5v-1.4364l4.09643-2.987 2.99567 1.9417c.2936.1903.6798.1523.9307-.0917l3.4772-3.3806 3.4772 3.3806.0228-.0234v2.5968c0 .2761-.2239.5-.5.5h-14c-.27614 0-.5-.2239-.5-.5z"})]});(0,e.registerBlockType)(x.UU,{icon:m,variations:s,edit:function(t){const{clientId:i,attributes:a,setAttributes:l,context:s}=t,{isInQueryLoop:u,linkEnabled:h}=a,x=(0,o.useSelect)(e=>e(n.store).getBlocks(i),[i]),{replaceInnerBlocks:m}=(0,o.useDispatch)(n.store),g=Number.isFinite(s.queryId);(0,r.useEffect)(()=>{g&&!u?l({isInQueryLoop:!0}):!g&&u&&l({isInQueryLoop:!1})},[g,u,l]),(0,r.useEffect)(()=>{if(u&&x.length>0){let t=!1,r=!1,o=!1;const n=i=>i.map(i=>{const a=d[i.name];if(a)if("core/heading"===i.name){if(!t)return t=!0,o=!0,(0,e.createBlock)(a,{level:i.attributes.level,isLink:!h})}else{if("core/paragraph"!==i.name){o=!0;const t={...i.attributes};return"core/post-featured-image"===a&&(t.isLink=!h),(0,e.createBlock)(a,t)}if(!r)return r=!0,o=!0,(0,e.createBlock)(a)}if("core/post-title"===i.name&&i.attributes.isLink===h)return o=!0,(0,e.createBlock)(i.name,{...i.attributes,isLink:!h},i.innerBlocks);if("core/post-featured-image"===i.name&&i.attributes.isLink===h)return o=!0,(0,e.createBlock)(i.name,{...i.attributes,isLink:!h},i.innerBlocks);if(i.innerBlocks.length>0){const t=n(i.innerBlocks);return(0,e.createBlock)(i.name,i.attributes,t)}return i}),a=n(x);o&&(console.log("Auto-transforming blocks for Query Loop context..."),m(i,a,!1))}},[u,x,i,m,h]);const b=x.length>0?k:p;return(0,c.jsx)(b,{...t})},save:function({attributes:e}){const{url:t,linkTarget:r,rel:o,variationType:i,isInQueryLoop:a,linkEnabled:l}=e,s=n.useBlockProps.save();if(!u.hasOwnProperty(i)&&l){if(a)return(0,c.jsx)("a",{href:"#",...s,children:(0,c.jsx)(n.InnerBlocks.Content,{})});if(!a)return(0,c.jsx)("a",{href:t,target:r,rel:o,...s,children:(0,c.jsx)(n.InnerBlocks.Content,{})})}return(0,c.jsx)("div",{...s,children:(0,c.jsx)(n.InnerBlocks.Content,{})})}})}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,r,n,i)=>{if(!r){var a=1/0;for(d=0;d<e.length;d++){for(var[r,n,i]=e[d],c=!0,l=0;l<r.length;l++)(!1&i||a>=i)&&Object.keys(o.O).every(e=>o.O[e](r[l]))?r.splice(l--,1):(c=!1,i<a&&(a=i));if(c){e.splice(d--,1);var s=n();void 0!==s&&(t=s)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,n,i]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={184:0,816:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,i,[a,c,l]=r,s=0;if(a.some(t=>0!==e[t])){for(n in c)o.o(c,n)&&(o.m[n]=c[n]);if(l)var d=l(o)}for(t&&t(r);s<a.length;s++)i=a[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},r=globalThis.webpackChunkwp_card_block=globalThis.webpackChunkwp_card_block||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[816],()=>o(721));n=o.O(n)})();